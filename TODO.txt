Back ground function to check if ShopingCart.Count > Product.Count
to make ShopingCart.Count = Product.Count


and If ShopingCart.Count == 0 => Remove from CartItem



remove pending orders:
public class OrderCleanupService
{
    private readonly ApplicationDbContext _context;

    public OrderCleanupService(ApplicationDbContext context)
    {
        _context = context;
    }

    public void CleanupIncompleteOrders()
    {
        var thresholdTime = DateTime.UtcNow.AddHours(-1); // Example: Cleanup orders older than 1 hour
           
        var incompleteOrders = _context.Orders
            .Where(o => o.OrderStatus == "Pending Payment" && o.CreatedOn < thresholdTime)
            .ToList();

        foreach (var order in incompleteOrders)
        {
            _context.Orders.Remove(order);
        }

        _context.SaveChanges();
    }
}


// Enqueue cleanup job
        BackgroundJob.Enqueue<OrderCleanupService>(service => service.CleanupIncompleteOrders());